<?xml version="1.0" encoding="UTF-8"?>

<component type="desktop-application">
  <id>org._3fz.mtoc</id>
  <launchable type="desktop-id">org._3fz.mtoc.desktop</launchable>
  <name>Mtoc</name>
  <summary>Visual music library</summary>

  <developer id="org._3fz">
    <name>Asa DeGroff</name>
  </developer>
  <update_contact>asa@3fz.org</update_contact>

  <description>
    <p>Mtoc is a visually-rich music player and library browser that emphasizes a smooth, continuous experience with album artwork at the forefront.</p>
    <ul>
      <li>Animated, visual browsing made for music fans who enjoy flipping through albums</li>
      <li>Library browsing with smart organization, responsive search, and automatic updates as you add music</li>
      <li>Lyrics support with synced and unsynced lyrics from embedded metadata and external files</li>
      <li>Advanced queue management and playlist editor</li>
      <li>Wide and compact layout modes fit a variety of display layouts</li>
      <li>Light and dark mode support with tinted blurred backgrounds</li>
      <li>Mini player and desktop integration with full MPRIS 2 support</li>
      <li>Gapless playback and ReplayGain support</li>
    </ul>
  </description>

  <screenshots>
    <screenshot type="default">
      <caption>Main window showing compact layout in light mode</caption>
      <image>https://github.com/asa-degroff/mtoc/raw/75a68abbbf2ccba72bb5ec4a16a2f6e844effc5b/resources/banner/main-screenshot-compact-light.png</image>
    </screenshot>
    <screenshot>
      <caption>Main window showing wide layout with lyrics in dark mode</caption>
      <image>https://github.com/asa-degroff/mtoc/raw/62c6abd669d13fddf87c998e29ba6f9653570bbf/resources/banner/lyric-view-dark.png</image>
    </screenshot>
    <screenshot>
      <caption>Main window showing compact layout in dark mode</caption>
      <image>https://github.com/asa-degroff/raw/raw/75a68abbbf2ccba72bb5ec4a16a2f6e844effc5b/resources/banner/main-screenshot-compact-dark.png</image>
    </screenshot>
    <screenshot>
      <caption>Main window showing wide layout in light mode</caption>
      <image>https://github.com/asa-degroff/mtoc/raw/75a68abbbf2ccba72bb5ec4a16a2f6e844effc5b/resources/banner/main-screenshot-wide-light.png</image>
    </screenshot>
    <screenshot>
      <caption>Queue list</caption>
      <image>https://github.com/asa-degroff/mtoc/raw/75a68abbbf2ccba72bb5ec4a16a2f6e844effc5b/resources/banner/queue-compact-light.png</image>
    </screenshot>
  </screenshots>

  <branding>
    <color type="primary" scheme_preference="light">#d1bdff</color>
    <color type="primary" scheme_preference="dark">#392a5a</color>
  </branding>

  <metadata_license>CC0-1.0</metadata_license>
  <project_license>GPL-3.0+</project_license>

  <url type="homepage">https://mtoc.3fz.org</url>
  <url type="bugtracker">https://github.com/asa-degroff/mtoc/issues</url>
  <url type="vcs-browser">https://github.com/asa-degroff/mtoc</url>
  <content_rating type="oars-1.1" />

  <recommends>
    <control>keyboard</control>
    <control>pointing</control>
  </recommends>

  <releases>

    <release version="2.5.2" date="2025-12-31">
      <description>
        <p>Spacebar shortcut and playlists toggle</p>
        <ul>
          <li>Added spacebar as a keyboard shortcut for play/pause</li>
          <li>Added the option to disable the playlists feature, hiding the Playlists tab and related UI elements and preventing playlist directory creation</li>
        </ul>
      </description>
    </release>

    <release version="2.5.1" date="2025-12-15">
      <description>
        <p>Bug fix for quit behavior with system tray disabled</p>
        <ul>
          <li>This patch fixes a bug where Flatpak build of mtoc would incorrectly remain open after closing the main window even with the "minimize to system tray on close" option disabled.</li>
        </ul>
      </description>
    </release>

    <release version="2.5" date="2025-12-09">
      <description>
        <p>Favorites, expanded options for playlist creation and editing, improved drag-and-drop list editing, new shuffle options</p>
        <ul>
          <li>Added a toggleable favorite button and dynamic favorites playlist</li>
          <li>Albums and tracks can now be added to a new or existing playlist through the right-click context menus in the library</li>
          <li>Drag-and-drop list reordering in the queue and playlist editor has been rewritten with auto-scroll and improved stability</li>
          <li>New context menu option to play an entire artist discography</li>
          <li>Shuffle option in album, artist, and playlist context menu</li>
          <li>Creating a new playlist now reveals it in the list and enables immediate renaming</li>
          <li>New option to auto-disable shuffle after queue replacement</li>
        </ul>
      </description>
    </release>

    <release version="2.4.2" date="2025-11-17">
      <description>
        <p>Split artist navigation links, fix for external-only album art</p>
        <ul>
          <li>Added split artist parsing for track artists, enabling navigation links to existing album artists from the now playing UI</li>
          <li>Enabled scanning of external album art for files that lack embedded art by matching common file names in the same directory</li>
        </ul>
      </description>
    </release>

    <release version="2.4.1" date="2025-11-12">
      <description>
        <p>Bug fixes for track transitions and lyrics display</p>
        <ul>
          <li>Fixed crash when manually selecting a track during gapless playback transition</li>
          <li>Added support for parsing embedded LRC-format lyrics with timestamps</li>
        </ul>
      </description>
    </release>

    <release version="2.4" date="2025-11-09">
      <description>
        <p>Multi-artist album support, track in window title</p>
        <ul>
          <li>Added the option to show albums with multiple album artists under each artist in the library</li>
          <li>Multi-line album artist tags are parsed separately, single-line album artist tags can be split with configurable delimiters</li>
          <li>The title and artist for the current track are now shown in the window title</li>
          <li>Performance improvements and reduced memory usage during library scanning</li>
        </ul>
      </description>
    </release>

    <release version="2.3.3" date="2025-10-27">
      <description>
        <p>Bug fixes for MPRIS album art, case-insensitive artist grouping, and theme switching</p>
        <ul>
          <li>Album art now appears in the MPRIS widget when using the Flatpak build</li>
          <li>Artists are now grouped case-insensitively in the artists list</li>
          <li>Tracks with case-mismatched album artists now appear in search results as expected</li>
          <li>Improved system theme detection for switching between light and dark modes without a restart</li>
        </ul>
      </description>
    </release>

    <release version="2.3.2" date="2025-10-20">
      <description>
        <p>Improved system tray context menu and synchronized lyrics during paused state</p>
        <ul>
          <li>System tray context menu now includes playback options and playlist picker</li>
          <li>Added Flatpak permissions for KDE system tray support</li>
          <li>Lyrics highlighting is now synchronized when playback is paused</li>
        </ul>
      </description>
    </release>

    <release version="2.3.1" date="2025-10-14">
      <description>
        <p>Bug fixes for lyrics refresh and file watcher</p>
        <ul>
          <li>Fixed a bug where newly added lyrics would cause the lyrics display not to update properly when changing tracks</li>
          <li>Fixed a bug where playing from the All Songs playlist after adding or removing tracks with the watcher enabled could cause a crash</li>
        </ul>
      </description>
    </release>

    <release version="2.3" date="2025-10-13">
      <description>
        <p>Lyrics support, file watcher, automatic library updates, minimize to tray</p>
        <ul>
          <li>Support for displaying unsynced and synced lyrics embedded in track metadata and external .lrc and .txt files</li>
          <li>Displays synced lyrics with line highlighting and reverse seeking by clicking a line in the lyrics</li>
          <li>External lyrics stored in the same directory as audio files are detected by the scanner and associated with the track with the best filename match</li>
          <li>New file watcher that updates your library to reflect added and removed music and lyrics files without manually triggering a scan</li>
          <li>Added library management options to choose between automatic library updates, refresh on startup, or manual updates</li>
          <li>Improved stability of the album carousel when albums are added and removed</li>
          <li>Added the option to minimize to tray when closing the main window</li>
          <li>Added the option to single-click to play tracks</li>
        </ul>
      </description>
    </release>

    <release version="2.2.4" date="2025-09-08">
      <description>
        <p>Bug fixed for album carousel with large libraries, album sorting consistency, and carousel reflection consistency</p>
        <ul>
          <li>Fixed a bug where the album carousel would not display albums when the library contained more than 1000 albums</li>
          <li>Improved sorting consistency for non-alphabetical characters in artist names</li>
          <li>Fixed a bug where the reflections for albums in the carousel using placeholder art were showing other albums' reflections</li>
        </ul>
      </description>
      </release>

    <release version="2.2.3" date="2025-08-27">
      <description>
        <p>Thumbnail size options, improved thumbnail loading performance, audio engine settings bug fixes, UI polish</p>
        <ul>
          <li>Added thumbnail size selector with options for 100%, 150%, and 200%, offering a choice between reduced memory usage or higher visual quality</li>
          <li>Added the option to rebuild thumbnails from the settings window</li>
          <li>Clicking an album  in the carousel now scrolls to and selects that album in the artists list for improved bidirectional continuity between the two album browsing interfaces</li>
          <li>Thumbnail cache optimizations for performance</li>
          <li>Improved programmatic scrolling in the artists list is now smoother and more predictable</li>
          <li>Asynchronous loading of grid views in the artists list loads thumbnails without blocking list height and position calculations for faster performance and smoother scrolling</li>
          <li>Option to expand or collapse all album grids in the artists list, accessible by right-clicking the artists list selector</li>
          <li>Fixed a bug where the carousel position could shift by 1px after clicking on an album</li>
          <li>Fixed a bug where positive gain values in preamplification and fallback gain settings were not being applied (positive gain now increases loudness and causes clipping distortion as expected)</li>
          <li>Fixed a bug where the slider handles in the settings appeared slightly misaligned from the slider position</li>
          <li>Album grid selection indicators are now 2px larger</li>
          <li>Relative width setting of the columns in the library pane now persists when resizing the window, changing layouts, and restarting the app</li>
        </ul>
      </description>
    </release>

    <release version="2.2.2" date="2025-08-22">
      <description>
        <p>Improved portal path handling, main window visibility option, region-aware search</p>
        <ul>
          <li>Library search is now region-aware, returns accent-insensitive results</li>
          <li>Added the option to keep the main window visible along with the mini player</li>
          <li>Fixed a bug where playlists containing tracks outside of the ~/Music directory didn't work in the Flatpak build of mtoc</li>
          <li>Fixed a bug where slider handles in the settings window were not recieving mouse input, and increased the size of the handles</li>
          <li>Miscellaneous layout and UI bug fixes</li>
        </ul>
      </description>
    </release>

    <release version="2.2.1" date="2025-08-19">
      <description>
        <p>Fix for AAC playback bug, system accent color integration</p>
        <ul>
          <li>Fixed a bug that caused a few seconds of silence between tracks when playing AAC audio</li>
          <li>Use system accent color for list selections</li>
          <li>Artists/Playlists tab selection is maintained when switching layouts</li>
        </ul>
      </description>
    </release>

    <release version="2.2" date="2025-08-18">
      <description>
        <p>Mini player, gapless playback, and ReplayGain support</p>
        <ul>
          <li>New mini player hides the main window and shows basic playback controls in a compact window, with three layout modes to choose from</li>
          <li>Precise gapless playback for supported files, with a continuous audio pipeline, next track preloading, and seamless transitions</li>
          <li>New audio engine features including ReplayGain support for volume normalization on supported tracks and albums, fallback gain setting, and preamplification slider</li>
        </ul>
      </description>
    </release>

    <release version="2.1.1" date="2025-08-09">
      <description>
        <p>Bug fixes for elevated GPU usage and missing close button icon</p>
          <ul>
            <li>Scrolling text now scrolls on hover to prevent high GPU usage from nonstop scrolling animations</li>
            <li>Fixed a bug causing the icon in the close button in the album art popup to be invisible</li>
        </ul>
      </description>
    </release>

    <release version="2.1" date="2025-08-07">
      <description>
        <p>Compact layout mode and light theme</p>
        <ul>
          <li>Compact layout moves the playback controls to below the library, and the queue and full-size album art to their own popups; ideal for use on small screens and tiling setups</li>
          <li>Light theme brings a new white and and pastel-colored interface</li>
          <li>Options in settings for compact &amp; wide layouts, light &amp; dark modes, and automatic switching for both</li>
          <li>Contextual queue header labels the current queue source</li>
          <li>Performance and image quality improvements for the album carousel with better anti-aliasing, and a slightly compacted layout</li>
          <li>Improved sorting consistency for artists with locale-aware handling of accented characters</li>
        </ul>
      </description>
    </release>

    <release version="2.0.2" date="2025-07-31">
      <description>
        <p>Updated icon and improved layout on small displays</p>
        <ul>
          <li>Expanded library pane for better usability at very small window widths</li>
          <li>Updated icon to match the new branding</li>
        </ul>
      </description>
      </release>

    <release version="2.0.1" date="2025-07-29">
      <description>
        <p>Fixed laggy image loading during fast scrolling in the album carousel</p>
        <ul>
          <li>Improved performance in album carousel with delegate recycling and improved connection handling</li>
          <li>Implemented multithreaded asynchronous image response for higher performance thumbnail loading</li>
          <li>Improved thumbnail size efficiency</li>
          <li>Dynamic pixmap cache sizing based on available system memory for improved image loading performance</li>
        </ul>
      </description>
    </release>

    <release version="2.0" date="2025-07-28">
      <description>
        <p>Functional overhaul expanding library management, playback features, and interface</p>
        <ul>
          <li>Support for queue management and context menus for queue actions</li>
          <li>M3U playlist support</li>
          <li>Playlist management with saving and editing playlists</li>
          <li>Shuffle and repeat modes</li>
          <li>All Songs virtual playlist for playback of the entire library</li>
          <li>Track info panel</li>
          <li>State persistence between sessions for queue, playback state, and interface selection</li>
          <li>New animations throughout the interface</li>
        </ul>
      </description>
    </release>
  </releases>

</component>